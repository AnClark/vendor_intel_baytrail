
{"config":
  [{"filename":"update.xml", "commands":"update", "subgroup":"full", "flashtype":"fastboot"},
   {"filename":"flash.xml", "commands":"blank", "subgroup":"erase_factory", "flashtype":"fastboot_dnx"},
   {"filename":"recover.xml", "commands":"blank", "subgroup":"full", "flashtype":"fastboot_dnx"},
   {"filename":"flash.json"}],
 "configurations":
   {"update":{"commands":"blank", "startState":"pos", "subgroup":"full", "default":true},
    "blank":{"commands":"blank", "startState":"dnx_pos", "subgroup":"erase_factory"},
    "recover":{"commands":"blank", "startState":"dnx_pos", "subgroup":"full"}},
 "commands":
   {"update":
     [{"type":"fastboot", "args":"oem verified", "desc":"Unlock device", "timeout":360000},
      {"type":"fastboot", "args":"flash bootloader", "desc":"Writing EFI System Partition", "source":"bootloader", "target":"bootloader"},
      {"type":"fastboot", "args":"flash system", "desc":"Flashing system partition", "source":"images", "target":"system.img", "timeout":500000},
      {"type":"fastboot", "args":"flash boot", "desc":"Flashing boot partition", "source":"boot:boot", "target":"boot.img"},
      {"type":"fastboot", "args":"flash recovery", "desc":"Flashing recovery partition", "source":"boot:recovery", "target":"recovery.img"},
      {"type":"fastboot", "args":"reboot", "desc":"Rebooting"}],
   "blank":
     [{"type":"fastboot", "args":"flash fw_stage2", "desc":"Flashing fw_stage2 image", "source":"provdatazip", "target":"emmc.bin", "mandatory":false, "!platform":["byt_mrd7"]},
      {"type":"sleep", "timeout":5000},
      {"type":"fastboot", "args":"flash osloader", "desc":"Flashing osloader image", "source":"bootloaderzip", "target":"loader.efi"},
      {"type":"fastboot", "args":"boot", "desc":"Uploading fastboot image.", "source":"fastboot", "target":"fastboot.img"},
      {"type":"waitForDevice", "arg":"pos", "timeout":25000},
      {"type":"fastboot", "args":"oem unlock", "desc":"Unlock device",  "timeout":360000},
      {"type":"fastboot", "args":"flash oemvars", "desc":"Setting OEM Variables", "source":"provdatazip", "target":"oemvars.txt", "!platform":["byt_mrd7"]},
      {"type":"fastboot", "args":"flash gpt", "desc":"Creating partition table", "source":"provdatazip", "target":"gpt.ini"},
      {"type":"fastboot", "args":"flash bootloader", "desc":"Writing EFI System Partition", "source":"bootloader", "target":"bootloader"},
      {"type":"fastboot", "args":"erase misc", "desc":"Erasing misc partition", "timeout":180000},
      {"type":"fastboot", "args":"erase cache", "desc":"Erasing cache partition", "timeout":240000},
      {"type":"fastboot", "args":"erase userdata", "desc":"Erasing userdata partition", "timeout":420000},
      {"type":"fastboot", "args":"erase persistent", "desc":"Erasing persistent partition", "timeout":240000},
      {"type":"fastboot", "args":"flash system", "desc":"Flashing system partition", "source":"images", "target":"system.img", "timeout":500000},
      {"type":"fastboot", "args":"flash boot", "desc":"Flashing boot partition", "source":"boot:boot", "target":"boot.img"},
      {"type":"fastboot", "args":"flash recovery", "desc":"Flashing recovery partition", "source":"boot:recovery", "target":"recovery.img"},
      {"type":"fastboot", "args":"oem verified", "desc":"Set device to Verified state", "variant":["eng","userdebug"], "timeout":360000},
      {"type":"fastboot", "args":"oem lock", "desc":"Set device to Locked state", "variant":["user"], "timeout":360000},
      {"type":"fastboot", "args":"oem provisioning-done", "desc":"Leave Provisioning Mode"},
      {"type":"fastboot", "args":"reboot", "desc":"Rebooting"}]}
}
